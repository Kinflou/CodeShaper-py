## System Imports


## Application Imports
#: import NavigationMenu Widgets.NavigationBar.NavigationBar
#: import RoundButton Widgets.RoundButton.RoundButton


## Library Imports
#: import get_color_from_hex kivy.utils.get_color_from_hex


<ShapingScreen>:
    name: 'shaping_screen'


    BoxLayout:
        canvas.before:
            Color:
                rgba: .5, .5, .5, 1
            Line:
                width: 1
                rectangle: self.x, self.y, self.width, self.height

        orientation: 'vertical'

        BoxLayout:
            size_hint: 1, dp(.06)

        BoxLayout:

            Splitter:
                size_hint: dp(.4), 1
                strip_size: '5dp'
                sizable_from: 'right'

                BoxLayout:
                    canvas.before:
                        Color:
                            rgba: .5, .5, .5, 1
                        Line:
                            width: 1
                            rectangle: self.x, self.y, self.width, self.height

                    MDTabs:
                        tab_bar_height: 25
                        text_color_active: get_color_from_hex("#ffd700")
                        underline_color: app.theme_cls.primary_dark

                        Tab:
                            title: 'Patches'
                            icon: 'bandage'

                            ScrollView:
                                id: patches_layout

            BoxLayout:
                orientation: 'vertical'

                MDTabs:
                    tab_bar_height: 25
                    text_color_active: get_color_from_hex('#ffd700')
                    underline_color: app.theme_cls.primary_dark

                    Tab:
                        title: 'Visitor'
                        icon: 'family-tree'

                        BoxLayout:

                            Splitter:
                                strip_size: '10dp'
                                sizable_from: 'right'

                                TextInput:
                                    id: process_file

                                    background_color: app.theme_cls.primary_color
                                    foreground_color: app.theme_cls.secondary_text_color

                            TextInput:
                                id: original_file

                                background_color: app.theme_cls.primary_color
                                foreground_color: app.theme_cls.secondary_text_color

                    Tab:
                        title: 'Project'
                        icon: 'file-tree'

                        BoxLayout:
                            orientation: 'vertical'

                            ScrollView:
                                do_scroll_x: False
                                id: target_layout

                            BoxLayout:
                                canvas.before:
                                    Color:
                                        rgba: .5, .5, .5, 1
                                    Line:
                                        width: 1
                                        rectangle: self.x, self.y, self.width, self.height

                                size_hint: 1, dp(.1)

                                MDLabel:
                                    canvas:
                                        Color:
                                            rgba: get_color_from_hex('ffff00')
                                        Ellipse:
                                            pos: self.pos[0] + 25, self.pos[1] + 12
                                            size: 15, 15

                                    padding: 22, 0
                                    halign: 'center'
                                    text: 'Untouched'

                                MDLabel:
                                    canvas:
                                        Color:
                                            rgba: get_color_from_hex('048fe0')
                                        Ellipse:
                                            pos: self.pos[0] + 28, self.pos[1] + 12
                                            size: 15, 15

                                    padding: 22, 0
                                    halign: 'center'
                                    text: 'Waiting'

                                MDLabel:
                                    canvas:
                                        Color:
                                            rgba: get_color_from_hex('8403b7')
                                        Ellipse:
                                            pos: self.pos[0] + 23, self.pos[1] + 12
                                            size: 15, 15

                                    padding: 22, 0
                                    halign: 'center'
                                    text: 'Processing'

                                MDLabel:
                                    canvas:
                                        Color:
                                            rgba: get_color_from_hex('02d34e')
                                        Ellipse:
                                            pos: self.pos[0] + 25, self.pos[1] + 12
                                            size: 15, 15

                                    padding: 22, 0
                                    halign: 'center'
                                    text: 'Finished'

                                MDLabel:
                                    canvas:
                                        Color:
                                            rgba: get_color_from_hex('c10303')
                                        Ellipse:
                                            pos: self.pos[0] - 10, self.pos[1] + 12
                                            size: 15, 15

                                    size_hint: dp(.5), 1
                                    padding: 20, 0
                                    halign: 'center'
                                    text: 'Error'

                    Tab:
                        title: 'Results'
                        icon: 'export'

                RelativeLayout:
                    id: visitor_layout
                    size_hint: 1, dp(.2)

            Splitter:
                size_hint: dp(.4), 1
                strip_size: '5dp'
                sizable_from: 'left'

                BoxLayout:
                    canvas.before:
                        Color:
                            rgba: .5, .5, .5, 1
                        Line:
                            width: 1
                            rectangle: self.x, self.y, self.width, self.height

                    MDTabs:
                        tab_bar_height: 25
                        text_color_active: get_color_from_hex("#ffd700")
                        underline_color: app.theme_cls.primary_dark

                        Tab:
                            title: 'Action'
                            icon: 'focus-field'

                            MDTabs:
                                tab_bar_height: 25
                                text_color_active: get_color_from_hex("#ffd700")
                                underline_color: app.theme_cls.primary_dark

                                Tab:
                                    title: 'Properties'

                                    ScrollView:
                                        id: action_properties_layout

                                Tab:
                                    title: 'Resolution'

                                    ScrollView:
                                        id: action_resolution_layout

                        Tab:
                            title: 'Frames'
                            icon: 'tray-full'

                            ScrollView:
                                id: frames_layout


        Splitter:
            strip_size: '10dp'
            sizable_from: 'top'

            size_hint: 1, dp(.3)

            BoxLayout:
                canvas.before:
                    Color:
                        rgba: .5, .5, .5, 1
                    Line:
                        width: 1
                        rectangle: self.x, self.y, self.width, self.height

                ScrollView:
                    id: logs_scroll

                    TextInput:
                        id: logs
                        size_hint: 1, None
                        height: max(self.minimum_height, logs_scroll.height)
                        disabled: True
                        background_color: app.theme_cls.primary_color
                        disabled_foreground_color: app.theme_cls.secondary_text_color

    NavigationBar:

